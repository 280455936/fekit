// Generated by CoffeeScript 1.4.0
(function() {
  var compiler, utils;

  compiler = require("../compiler/compiler");

  utils = require("../util");

  exports.usage = "合并项目文件";

  exports.run = function(options) {
    var conf,
      _this = this;
    conf = utils.config.parse(options.cwd);
    conf.each_export_files(function(srcpath, parents) {
      var dest, source, urlconvert;
      utils.logger.log("正在处理 " + srcpath);
      urlconvert = new utils.UrlConvert(srcpath);
      source = compiler.compile(srcpath, parents);
      dest = urlconvert.to_dev();
      new utils.file.writer().write(dest, source);
      return utils.logger.log("已经处理 " + srcpath + "  ==> " + dest);
    });
    return utils.logger.log("DONE.");
  };

}).call(this);
